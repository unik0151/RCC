在区块链网络中，每个节点都包含最新的账本数据，如果不同节点同一时间都产生了有效区块，通过链内的共识机制以及时间戳和最长链原则保证数据的一致性，只有大多数节点经过验证的区块作为有效区块，在产生硬分叉分支时的快照机制，确保新旧链资产独立，避免双花问题，，用户在两个链分别持有对应资产。
POW确保了算力高的节点上的链是最长链
区块头数据传输使校验更高效，同步更快

比如区块链网络有9个节点
每个节点的块此时是 4个

当1 节点挖到矿 ， 4节点挖到矿
为同时
如果一节点广播的区块被九个节点超过一半进行校验通过，另一个矿工广播速度更慢为算力不行，此时 4 节点广播的区块就是失效的，少数有问题的节点就会将1节点生成的块作为有效块，此时有问题的块就会按照大多数节点认可的链进行同步
# 什么是比特币中的 P2P 网络技术
    * P2P网络技术是比特币的核心组成部分之一，他是一个去中心化的点对点的网络通信技术，允许比特币作为一个去中心化的数字货币系统运行
    * 在这个网络中，每个节点都保留着完整的交易记录，并参与网络的管理，无需中央服务器

# 区块链在比特币中起什么作用
    * 区块链作为比特币作为一个分布式账本，保留着完整的交易记录
    * 使用链式的结构连接每一个区块，保证网络中数据传输的完整性和一致性

# 比特币如何使用工作量证明机制
    * 比特币使用POW（工作量证明）保证分布式账本数据的一致性和安全性
    *POW工作量证明，必须完成复杂的数学难题来找到有效难度的hash值获取记账权

# 最长链原则是如何在比特币中应用的
    * 在比特币网络中，如果出现两个有效的区块链分支，按照最长链原则网络会认可拥有最长链的分支
    * 为什么，由于最长链的安全性最高，拥有最大的算力支持

# 比特币系统中的分叉是如何发生的
区块生成会通过网络广播到各个节点，此时有其他矿工也生成了有效区块，会临时分叉，最终会依据算力最高节点的最长链最为有效链
    * 分支通常是软件升级或者变更产生的
    * 分支可以是硬分支，节点必须升级软件才能提供服务，
    当新的共识规则发布后，未升级的节点无法验证已升级节点生成的区块，从而导致链分裂为两条独立的链，旧节点拒绝验证新节点生产的区块，双方各自认为自己是正确的链
    * 软分支，新旧分支仍能接受新区块，保证网络一致
    向前兼容和向后兼容保证新旧区块的一致性。软件升级或代码修改，旧节点不会感知这种变化，仍会接受新节点生成的区块，意味着新就节点始终在一条链上工作，保证了区块链的连续性和一致性
    - 优点：
        * 保持一条链：软分叉不会导致区块链分成两条链，降低了分叉的风险
        * 系统稳定升级：不需要所有节点同时升级，允许逐步升级，不影响系统的稳定性和有效性
        * 无需硬件升级：矿工可以在在原有设备继续挖矿
    - 缺点：
        * 设计复杂：软分叉要求系统设计成向前兼容，增加了设计的复杂度
        * 绕过节点验证（基于欺骗）：建立在老节点未感知变化的基础上，某种程度上违背了单点完整校验

# 什么是比特币的 Coinbase 交易
    * Coinbase是区块中第一笔交易，只有交易输出没有交易输入
    * 只是输出记录了给矿工的奖励和手续费

# UTXO 模型是什么
    * UTXO（为花费的交易输出）是比特币使用的一种账户余额机制
    * 这种模型下，交易的输出不直接转入接收方账户，而是作为新的UTXO记录，
    只有当输出被新的交易引入和花费时，才会从UTXO数据库中移除

#  比特币如何解决双花问题
    * 比特币通过网络中的节点验证所有新纪录是否引入了有效的UTXO来解决双花问题
    * 一旦被交易引用，就被旧的账户的UTXO数据库标记为已花费

# 什么是比特币的工作量证明（PoW）机制
    * 要求矿工统一解决一个数学难题，标识做了一定的算力工作
    * 保证网络，防止欺骗，DDOS

# 比特币地址是如何生成的
    * 通过将用户的公钥通过hash算法进行加密，并通过base58编码输出固定长度的字符，为比特币接受提供一个接受点

# 隔离见证（SegWit）是什么，它如何工作
    * 隔离见证是一种比特币的软分叉升级，旨在解决交易延展性问题并提高区块容量
    * 通过将签名数据 从交易信息剥离，不在计算交易ID，从而在区块中能处理更多的交易信息，减少了交易费
，因为一个区块默认最大是1MB

# 比特币挖矿是如何进行的
    * 通过SHA-256哈希算法，不断调整nonce随机数，直到生成的哈希值满足当前网络难度的目标
    * 成功挖掘一个新区快，矿工将获得比特币和交易手续费作为奖励

# 比特币网络是如何保护用户隐私的
    * 交易公开，公钥公开，提供了一定隐私保护，交易不直接与用户的真实身份关联，根据他们的密钥和地址关联，私钥进行哈希加密和base58编码的固定字符作为其账户地址

# 比特币的难度调整是如何工作的
    * 根据过去2016个区块的生成时间进行调整，确保全网平均10分钟生成一个新区块
    * 2016个区块的调整一般是两周调整一次
    * 如果挖矿速度快则提高难度，慢则降低难度，根据区块链网络自动调整
